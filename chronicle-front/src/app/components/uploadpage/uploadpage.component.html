<div class="page">
    <div fxLayout="column" fxLayoutGap="20px" fxLayoutAlign="center">
        <!-- Title of the page  -->
        <h2 class="page-title">Upload a file</h2>

        <!-- Upload progress bar (Does this work?) -->
        <!-- <div *ngIf="currentFile" class="progress">
            <div class="progress-bar progress-bar-info progress-bar-striped" role="progressbar"
                attr.aria-valuenow="{{ progress }}" aria-valuemin="0" aria-valuemax="100"
                [ngStyle]="{ width: progress + '%' }">
                {{ progress }}%
            </div>
        </div> -->
    
        <!-- Form fields -->
        <div id="upload-form">
    
            <!-- TITLE -->
            <div fxLayoutAlign="center" fxFlexFill>
                <mat-form-field appearance="outline">
                    <mat-label for="file-title">Title</mat-label>
                    <input matInput type="text" id="file-title" name="file-title" [(ngModel)]="title">
                </mat-form-field>
            </div>
            
            <!-- BATCH -->
            <div fxLayoutAlign="center" fxFlexFill>
                <mat-form-field appearance="outline">
                    <mat-label for="file-batch">Batch</mat-label>
                    <input matInput type="text" id="file-batch" name="file-batch" [(ngModel)]="batch">
                </mat-form-field>
            </div>
            
            <!-- TOPICS -->
            <div fxLayoutAlign="center" fxFlexFill>
                <mat-form-field appearance="outline">
                    <mat-label>Topics</mat-label>
                    <mat-chip-list #chipList aria-label="Topic selection">
                        <mat-chip *ngFor="let topic of topics" [selectable]="selectable" [removable]="removable"
                            (removed)="remove(topic)">
                            {{topic.value}}
                            <mat-icon matChipRemove *ngIf="removable">cancel</mat-icon>
                        </mat-chip>
                        <input placeholder="New topic..." [matChipInputFor]="chipList"
                            [matChipInputSeparatorKeyCodes]="separatorKeysCodes" [matChipInputAddOnBlur]="addOnBlur"
                            (matChipInputTokenEnd)="add($event)">
                    </mat-chip-list>
                </mat-form-field>
            </div>
          <!--Which one to keep?-->
            <mat-form-field appearance="outline">
                <mat-label>Topics</mat-label>
                <mat-chip-list #chipList aria-label="Topic selection">
                    <mat-chip *ngFor="let tag of tags" [selectable]="selectable" [removable]="removable"
                        (removed)="remove(tag)">
                        {{tag.value}}
                        <mat-icon matChipRemove *ngIf="removable">cancel</mat-icon>
                    </mat-chip>
                    <input placeholder="New topic..." [matChipInputFor]="chipList"
                        [matChipInputSeparatorKeyCodes]="separatorKeysCodes" [matChipInputAddOnBlur]="addOnBlur"
                        (matChipInputTokenEnd)="add($event)">
                </mat-chip-list>
            </mat-form-field>

            <!-- DESCRIPTION -->
            <div fxLayoutAlign="center" fxFlexFill>
                <mat-form-field appearance="outline">
                    <mat-label for="file-description">Description</mat-label>
                    <textarea matInput type="text" id="file-description" name="file-description"
                        [(ngModel)]="description"></textarea>
                </mat-form-field>
            </div>
    
            <!-- Old  -->
            <div fxLayoutAlign="center">
                <label class="btn btn-default">
                    <input type="file" (change)="selectFile($event)" />
                </label>
            </div>
            <br>
    
    
            <!-- CHOOSE FILE -->
            <!-- Need to import NgxMatFileInputModule -->
            <!-- <mat-form-field appearance="outline">
                <mat-label for="file-topic">Choose a file</mat-label>
                <ngx-mat-file-input type="file" (change)="selectFile($event)" ></ngx-mat-file-input>
            </mat-form-field> -->
    
            <!-- UPLOAD BUTTON -->
            <div fxLayoutAlign="center" fxFlexFill>
                <button class="upload-button" mat-flat-button color="primary" [disabled]="!selectedFiles"
                (click)="upload()">Upload</button>
            </div>
        </div>
    
    
        <!-- File upload status message (Does this work?) -->
        <!-- <div class="alert alert-light" role="alert">{{ message }}</div> -->

        <!-- NOT SURE WHAT THIS IS, COMMENTING OUT FOR NOW -->
        <!-- <div class="card">
            <div class="card-header">List of Files</div>
            <ul class="list-group list-group-flush" *ngFor="let file of fileInfos | async">
                <li class="list-group-item">
                    <a href="{{ file.url }}">{{ file.name }}</a>
                </li>
            </ul>
        </div> -->
    </div>
</div>